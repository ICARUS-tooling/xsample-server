<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:jsf="http://xmlns.jcp.org/jsf">

	<h:form id="slice">	
		<p:panel>
			<f:facet name="header">
				<h:outputText value="#{bundle['slice.multiPartInfo']}" />
			</f:facet>
			
			<p:selectManyMenu value="#{sliceView.selectedParts}" 
                          converter="corpusConverter"  var="part" filter="true"
                          filterMatchMode="contains" showCheckbox="true"
                          styleClass="manymenu-advanced" scrollHeight="800">
                      <p:ajax event="change" update="sliceOutline" listener="#{slicePage.corpusCompositionChanged}" />
         				<f:selectItems value="#{xsampleExcerptData.manifest.allParts}" 
         					var="part" itemLabel="#{part.title}" itemValue="#{part}"/>
				<p:column headerText="#{bundle['slice.corpusId']}">
	                <h:outputText value="#{part.id}"/>
	            </p:column>
				<p:column headerText="#{bundle['slice.corpusSegments']}">
	                <h:outputText value="#{xsampleExcerptData.getSegments(part)}"/>
	            </p:column>
				<p:column headerText="#{bundle['slice.corpusTitle']}">
	                <h:outputText value="#{part.title}"/>
	            </p:column>
			</p:selectManyMenu>
		
			<f:facet name="footer">
	        	<p:messages id="navMsg" for="navMsgs" showSummary="true" showDetail="false" redisplay="false" />
				<p:commandButton value="#{bundle['back']}" action="#{slicePage.back}" process="@this" />
				<p:commandButton widgetVar="wv_continue" value="#{bundle['continue']}" 
					action="#{slicePage.next}" update="navMsg" />
			</f:facet>
		</p:panel>
	</h:form>
</ui:composition>